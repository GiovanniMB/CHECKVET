<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <%- include('../partials/head')%>
        <title>CHECKVET - Registro</title>
</head>

<body>
    <%- include('../partials/header')%>

        <main role="main" class="py-4">
            <div class="container">
                <div class="card shadow-sm">
                    <div class="card-header bg-success text-white">
                        <h4 class="card-title text-center mb-0"><i class="bi bi-pencil-square me-2"></i>Registro de
                            Paciente</h4>
                    </div>

                    <div class="card-body">
                        <form id="registro-form" novalidate>
                            <!-- Sección Mascota -->
                            <section class="form-section" aria-labelledby="datos-mascota-heading">
                                <h2 id="datos-mascota-heading"><i class="bi bi-heart-pulse me-2"></i>Datos de Mascota
                                </h2>

                                <div class="row g-3 mb-4">
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="nombreMascota"
                                                name="nombreMascota" placeholder=" " required>
                                            <label for="nombreMascota" class="required-field">Nombre</label>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <select class="form-select" id="Especie" name="Especie" required>
                                                <option value="" selected disabled>Seleccione una opción</option>
                                            </select>
                                            <label for="Especie" class="required-field">Especie</label>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <select class="form-select" id="raza" name="raza" required>
                                            </select>
                                            <label for="raza" class="required-field">Raza</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3 mb-4">
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="date" class="form-control" id="fecha" name="fecha"
                                                placeholder=" " required>
                                            <label for="fecha" class="required-field">Fecha Nacimiento</label>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="archivoImagen" class="btn btn-outline-success btn-upload w-100">
                                                <i class="bi bi-camera-fill me-2"></i>Subir Foto de la Mascota
                                            </label>
                                            <input type="file" class="d-none" id="archivoImagen" name="archivoImagen"
                                                accept="image/*">
                                            <small class="form-text text-muted">Formatos: JPG, PNG (Max. 2MB)</small>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="peso" name="peso"
                                                placeholder=" " required>
                                            <label for="peso" class="required-field">Peso (kg)</label>
                                        </div>
                                    </div>

                                </div>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <select class="form-select" id="Sexo" name="Sexo" required>
                                                <option value="" selected disabled>Seleccione una opción</option>
                                                <option value="M">Macho</option>
                                                <option value="F">Hembra</option>
                                            </select>
                                            <label for="Sexo" class="required-field">Sexo</label>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="form-floating">
                                            <textarea class="form-control" name="detalles" placeholder="Leave a comment here"
                                                id="floatingTextarea" rows="4"></textarea>
                                            <label for="floatingTextarea">Generales</label>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Sección Dueño -->
                            <section class="form-section" aria-labelledby="datos-dueno-heading">
                                <h2 id="datos-dueno-heading"><i class="bi bi-person-vcard me-2"></i>Datos del Dueño</h2>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="Curp" name="Curp"
                                                placeholder=" " pattern="[A-Z]{4}[0-9]{6}[A-Z]{6}[A-Z0-9]{2}" required>
                                            <input type="hidden" id="curpRegistrado" name="curpRegistrado">
                                            <label for="Curp" class="required-field">CURP</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="nombre" name="nombre"
                                                placeholder=" " required>
                                            <label for="nombre" class="required-field">Nombre(s)</label>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="apellidoP" name="apellidoP"
                                                placeholder=" " required>
                                            <label for="apellidoP" class="required-field">Apellido Paterno</label>
                                        </div>
                                    </div>


                                </div>

                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="ApellidoM" name="ApellidoM"
                                                placeholder=" " required>
                                            <label for="ApellidoM" class="required-field">Apellido Materno</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="tel" class="form-control" id="Telefono" name="Telefono"
                                                placeholder=" " pattern="[0-9]{10}" required>
                                            <label for="Telefono" class="required-field">Teléfono</label>
                                            <small class="form-text text-muted">10 dígitos sin espacios</small>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="email" class="form-control" id="Email" name="Email"
                                                placeholder=" " required>
                                            <label for="Email" class="required-field">Correo Electrónico</label>
                                        </div>
                                    </div>


                                </div>
                            </section>

                            <!-- Sección Dirección -->
                            <section class="form-section" aria-labelledby="datos-direccion-heading">
                                <h2 id="datos-direccion-heading"><i class="bi bi-geo-alt me-2"></i>Datos de Dirección
                                </h2>

                                <div class="row g-3 mb-3">
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <select class="form-select" id="estado" name="estado" required>
                                                <option value="" selected disabled>Seleccione una opción</option>
                                            </select>
                                            <label for="estado" class="required-field">Estado</label>
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <select class="form-select" id="Municipio" name="Municipio" required>
                                            </select>
                                            <label for="Municipio" class="required-field">Municipio/Alcaldía</label>
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <select class="form-select" id="Colonia" name="Colonia" required>
                                            </select>
                                            <label for="Colonia" class="required-field">Colonia</label>
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="Calle" name="Calle"
                                                placeholder=" " required>
                                            <label for="Calle" class="required-field">Calle</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row g-3">
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="numero" name="numero"
                                                placeholder=" " required>
                                            <label for="numero" class="required-field">Número Exterior</label>
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="numeroInt" name="numeroInt"
                                                placeholder=" ">
                                            <label for="numeroInt">Número Interior</label>
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="cp" name="cp" placeholder=" "
                                                pattern="[0-9]{5}" required>
                                            <label for="cp" class="required-field">Código Postal</label>
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="referencias" name="referencias"
                                                placeholder=" ">
                                            <label for="referencias">Referencias</label>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Sección Usuario -->
                            <section class="form-section" aria-labelledby="datos-usuario-heading">
                                <h2 id="datos-usuario-heading"><i class="bi bi-shield-lock me-2"></i>Datos de Usuario
                                </h2>

                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="username" name="username"
                                                placeholder=" " required>
                                            <label for="username" class="required-field">Nombre de Usuario</label>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="password" class="form-control" id="password" name="password"
                                                placeholder=" " required minlength="8">
                                            <label for="password" class="required-field">Contraseña</label>
                                            <small class="form-text text-muted">Mínimo 8 caracteres</small>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="password" class="form-control" id="confirmPassword"
                                                name="confirmPassword" placeholder=" " required>
                                            <label for="confirmPassword" class="required-field">Confirmar
                                                Contraseña</label>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Botones de acción -->
                            <div class="d-flex justify-content-between mt-4">
                                <button type="reset" class="btn btn-outline-secondary px-4">
                                    <i class="bi bi-arrow-counterclockwise me-2"></i>Limpiar
                                </button>

                                <button type="submit" class="btn btn-success px-4">
                                    <i class="bi bi-save me-2"></i>Guardar Registro
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
        <%- include('../partials/footer')%>

            <script src="/mascotaService.js"></script>
            <script src="/registroController.js"></script>
            <script>
                document.querySelectorAll('.password-toggle').forEach(toggle => {
                    toggle.addEventListener('click', function () {
                        const passwordInput = this.previousElementSibling;
                        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                        passwordInput.setAttribute('type', type);
                        this.querySelector('i').classList.toggle('bi-eye');
                        this.querySelector('i').classList.toggle('bi-eye-slash');
                    });
                });

                // Validación de formulario
                document.getElementById('registro-form').addEventListener('submit', function (e) {
                    e.preventDefault();

                    // Validar que las contraseñas coincidan
                    const password = document.getElementById('password').value;
                    const confirmPassword = document.getElementById('confirmPassword').value;

                    if (password !== confirmPassword) {
                        alert('Las contraseñas no coinciden');
                        return;
                    }

                    if (this.checkValidity()) {
                        alert('Formulario enviado correctamente');
                        // this.submit();
                    } else {
                        e.stopPropagation();
                        this.classList.add('was-validated');
                    }
                });

            </script>
</body>

</html>